<toaster-container></toaster-container>
<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-9">
    <h2>Aseguradoras</h2>
    <ol class="breadcrumb margin-top-15">
      <li>
        <a ui-sref="inicio.inicio">Inicio</a>
      </li>
      <li class="active">
        <strong>Aseguradoras</strong>
      </li>
    </ol>
  </div>
</div>
<br>
<div class="row">
  <div class="col-md-10">
    <button class="btn btn-success" ng-click="showCompany = true">Agregar Nueva</button>
  </div>
  <div class="col-md-2 pull-right">
    <button class="btn btn-primary ladda-button2" ng-click="keyReport()">Reporte de claves</button>
    <!-- <button class="btn btn-primary" ng-click="test()">Reporte de claves</button> -->
  </div>
</div>
<br>
<div class="row" ng-if="showCompany">
  <div class="col-xs-12">
    <div class="ibox float-e-margins">
      <div class="ibox-title">
        <h5>Agregar Nueva</h5>
      </div>
      <div class="ibox-content">
          <uib-tabset active="activeJustified" justified="true">
            <uib-tab index="0" heading="Aseguradoras" ng-click="vm.afianzadora = false">
              <div class="ibox-content">
                <form name="form" ng-submit="vm.submit(form.$valid)">
                  <div class="row">
                    <div class="col-xs-12 col-md-6 form-group">
                      <label>Compañía<span class="color-red">*</span></label>
                      <input class="form-control" type="phone" name="" ng-model="vm.form.compania" required />
                    </div>

                    <div class="col-xs-12 col-md-6 form-group">
                      <label>Alias<span class="color-red">*</span></label>
                      <input class="form-control" type="phone" name="" ng-model="vm.form.alias" required />
                    </div>

                    <div class="col-xs-12 col-md-6 form-group">
                      <label>RFC<span class="color-red">*</span></label>
                      <input class="form-control" type="phone" name="" ng-model="vm.form.rfc" required />
                    </div>

                    <div class="col-xs-12 col-md-6 form-group">
                      <label>Teléfono<span class="color-red">*</span></label>
                      <phonenumber-directive model="vm.form.phone" requerid></phonenumber-directive>
                    </div>

                    <div class="col-xs-12 col-md-6 form-group">
                      <label>Website<span class="color-red">*</span></label>
                      <textarea class="form-control" name="" ng-model="vm.form.website" required cols="1" rows="1" style="resize: none;"></textarea>
                    </div>

                    <div class="col-xs-12">
                      <legend class="legend-title" align="center">Ramos</legend>
                      <div class="row">
                        <div class="col-xs-12 col-sm-6 col-md-3" align="center">
                          <div class="checkbox">
                            <label><input type="checkbox" ng-model="vm.form.ramos.vida">Vida</label>
                          </div>
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-3" align="center">
                          <div class="checkbox">
                            <label><input type="checkbox" ng-model="vm.form.ramos.accidentes">Accidentes y Enfermedades</label>
                          </div>
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-3" align="center">
                          <div class="checkbox">
                            <label><input type="checkbox" ng-model="vm.form.ramos.autos">Automóviles</label>
                          </div>
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-3" align="center">
                          <div class="checkbox">
                            <label><input type="checkbox" ng-model="vm.form.ramos.danios">Daños</label>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="address-container" ng-repeat="address in vm.address_list track by $index">
                      <div class="col-xs-12 legend-gray btn-mt">
                        <legend class="legend-title legend-flex" align="center">
                          <button type="button" class="btn btn-danger pull-left hidden-xs" name="button" ng-click="vm.deleteAddress($index)" ng-disabled="vm.address_list.length <= 1">
                            Quitar dirección
                          </button>
                          <button type="button" class="btn btn-danger pull-left visible-xs-inline-block" name="button" ng-click="vm.deleteAddress($index)" ng-disabled="vm.address_list.length <= 1">
                            <i class="glyphicon glyphicon-minus"></i>
                          </button>
                          <span>
                            Dirección #{{$index + 1}}
                          </span>
                          <button class="btn btn-success pull-right hidden-xs" ng-click="vm.addAddress()" type="button">
                            Agregar dirección
                          </button>
                          <button class="btn btn-success pull-right visible-xs-inline-block" ng-click="vm.addAddress()" type="button">
                            <i class="glyphicon glyphicon-plus"></i>
                          </button>
                        </legend>
                      </div>

                      <div class="col-xs-12 address_components">
                        <div class="col-xs-12 col-sm-6 nopadding form-group" ng-class="{ 'has-error': form.state.$invalid && !form.state.$pristine }">
                          <label>Estado<span class="color-red">*</span></label>
                          <select class="form-control" data-ng-options="estado.state for estado in vm.statesArray track by estado.url" name="state" ng-model="address.administrative_area_level_1" required>
                            <option value="" disabled="">Selecciona un estado</option>
                          </select>
                        </div>

                        <div class="col-xs-12 col-sm-6 nopadding form-group" ng-class="{ 'has-error': form.city.$invalid && !form.city.$pristine }">
                          <label>Municipio<span class="color-red">*</span></label>
                          <select class="form-control" data-ng-options="ciudad.city for ciudad in address.administrative_area_level_1.cities track by ciudad.url" name="city" ng-model="address.administrative_area_level_2" required>
                            <option value="" disabled="">Selecciona un municipio</option>
                          </select>
                        </div>

                        <div class="col-xs-12 col-md-8 nopadding form-group">
                          <label>Calle</label>
                          <input type="text" class=" form-control" ng-model="address.route" id="id_address_route" name="address_route" data-geo="route" />
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-2 nopadding form-group">
                          <label>Num. Ext.</label>
                          <input type="text" class=" form-control" ng-model="address.street_number" id="id_address_street_number" name="address_street_number" data-geo="street_number" />
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-2 nopadding form-group">
                          <label>Num. Int.</label>
                          <input type="text" class=" form-control" ng-model="address.street_number_int" id="id_address_street_number_int" name="address_street_number_int" />
                        </div>

                        <div class="col-xs-12 col-sm-6 nopadding form-group">
                          <label>Colonia</label>
                          <input type="text" class=" form-control" ng-model="address.sublocality" id="id_address_sublocality" name="address_sublocality" data-geo="sublocality" />
                        </div>

                        <div class="col-xs-12 col-sm-6 nopadding form-group">
                          <label>Código Postal</label>
                          <input type="tel" name="zip" ng-model="address.postal_code" minlength="5" maxlength="5" class="form-control" ng-keypress=filterValue($event) />
                        </div>

                        <div class="col-xs-12 nopadding form-group">
                          <label>Referencias</label>
                          <input type="text" class=" form-control" ng-model="address.details" id="id_address_details" name="address_details" />
                        </div>

                        <input type="hidden" class=" form-control" ng-model="address.administrative_area_level_1_short" id="id_address_administrative_area_level_1_short" name="address_state_code" data-geo="administrative_area_level_1_short" />

                        <input type="hidden" class=" form-control" ng-model="address.country" id="id_address_country" name="address_country" data-geo="country" value="México" />

                        <input type="hidden" class=" form-control" ng-model="address.composed" id="id_address_composed" name="address_composed" />

                        <input type="hidden" class=" form-control" ng-model="address.country_code" id="id_address_country_code" name="address_country_code" data-geo="country_short" value="MX" />

                        <input type="hidden" class=" form-control" ng-model="address.locality" id="id_address_locality" name="address_locality" data-geo="locality" />

                        <input type="hidden" class=" form-control" ng-model="address.latitude" id="id_address_latitude" name="address_latitude" data-geo="lat" />

                        <input type="hidden" class=" form-control" ng-model="address.longitude" id="id_address_longitude" name="address_longitude" data-geo="lng" />

                        <input type="hidden" class=" form-control" ng-model="address.formatted" id="id_address_formatted" name="address_formatted" data-geo="formatted_address" />
                      </div>
                    </div>

                    <div class="col-xs-12 form-group btn-mt">
                      <label>Observaciones</label>
                      <textarea class="form-control" type="text" ng-model="vm.form.description"></textarea>
                    </div>

                    <div>
                      <div class="col-xs-12">
                        <legend class="legend-title" align="center">
                          Información de contacto
                        </legend>
                      </div>

                      <div class="col-xs-12">
                        <div class="row" ng-if="vm.form.contact_provider.length == 0">
                          <div class="col-xs-12 legend-gray">
                            <legend class="legend-title legend-flex" align="center">
                              <button type="button" class="btn btn-danger pull-left hidden-xs" name="button" ng-disabled="vm.form.contact_provider == 0">
                                Quitar contacto
                              </button>
                              <button type="button" class="btn btn-danger pull-left visible-xs-inline-block" name="button" ng-disabled="vm.form.contact_provider.length == 0">
                                <i class="glyphicon glyphicon-minus"></i>
                              </button>
                              <span>
                                Contactos
                              </span>
                              <button class="btn btn-success pull-right hidden-xs" ng-click="vm.addContact()" type="button">
                                Agregar contacto
                              </button>
                              <button class="btn btn-success pull-right visible-xs-inline-block" ng-click="vm.addContact()" type="button">
                                <i class="glyphicon glyphicon-plus"></i>
                              </button>
                            </legend>
                          </div>
                        </div>

                        <div class="row address-container" ng-repeat="contact in vm.form.contact_provider track by $index">
                          <div class="col-xs-12 legend-gray">
                            <legend class="legend-title legend-flex" align="center">
                              <button type="button" class="btn btn-danger pull-left hidden-xs" name="button" ng-click="vm.deleteContacts(contact.url, $index)">
                                Quitar contacto
                              </button>
                              <button type="button" class="btn btn-danger pull-left visible-xs-inline-block" name="button" ng-click="vm.deleteContacts(contact.url, $index)">
                                <i class="glyphicon glyphicon-minus"></i>
                              </button>
                              <span>
                                Contacto #{{$index + 1}}
                              </span>
                              <button class="btn btn-success pull-right hidden-xs" ng-click="vm.addContact()" type="button">
                                Agregar contacto
                              </button>
                              <button class="btn btn-success pull-right visible-xs-inline-block" ng-click="vm.addContact()" type="button">
                                <i class="glyphicon glyphicon-plus"></i>
                              </button>
                            </legend>
                          </div>

                          <div class="col-xs-12 address_components">
                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Nombre</label>
                              <input class="form-control" type="text" ng-model="contact.name">
                            </div>

                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Correo electrónico</label>
                              <input class="form-control" type="email" ng-model="contact.email">
                            </div>

                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Teléfono</label>
                              <phonenumber-directive placeholder="myPrompt" model="contact.phone_number"></phonenumber-directive>
                            </div>

                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Ramo</label>
                              <select class="form-control" ng-model="contact.conramo" data-ng-options="ramo.ramo_name for ramo in vm.ramos track by ramo.id" ng-change="vm.changeRamo(contact, contact.conramo,$index)" required>
                                <option value="">Todos los ramos</option>
                              </select>
                            </div>

                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Subramo</label>
                              <select class="form-control" ng-model="contact.consubramo" data-ng-options="subramo.subramo_name for subramo in vm.subramos track by subramo.url" ng-change = "vm.changeSubramo(contact, contact.consubramo,$index)" required>
                                <option value="">Todos los subramos</option>
                              </select>
                            </div>

                            <!-- <div class="col-xs-12 col-sm-4 form-group">
                              <label>Ramo</label>
                              <input class="form-control" type="text" lowercase ng-model="contact.ramo">
                            </div>

                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Subramo</label>
                              <input class="form-control" type="text" lowercase ng-model="contact.subramo">
                            </div> -->
                          </div>
                        </div>

                        <div class="btn-mt">
                          <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 form-group pull-right">
                            <button ng-if="vm.user.permiso.crear" class="col-xs-12 btn btn-primary" ng-disabled="form.$invalid" type="submit">Crear Aseguradora</button>
                          </div>
                          <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 form-group pull-right">
                            <button id="cancelButtonMoral" class="col-xs-12 btn btn-danger" ng-click="cancel()" type="button">Cancelar</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </uib-tab>
            <uib-tab index="1" heading="Afianzadoras" ng-click="vm.afianzadora = true">
              <div class="ibox-content">
                <form name="form" ng-submit="vm.submit(form.$valid)">
                  <div class="row">
                    <div class="col-xs-12 col-md-6 form-group">
                      <label>Compañía<span class="color-red">*</span></label>
                      <input class="form-control" type="phone" name="" ng-model="vm.form.compania" required />
                    </div>

                    <div class="col-xs-12 col-md-6 form-group">
                      <label>Alias<span class="color-red">*</span></label>
                      <input class="form-control" type="phone" name="" ng-model="vm.form.alias" required />
                    </div>

                    <div class="col-xs-12 col-md-6 form-group">
                      <label>RFC<span class="color-red">*</span></label>
                      <input class="form-control" type="phone" name="" ng-model="vm.form.rfc" required />
                    </div>

                    <div class="col-xs-12 col-md-6 form-group">
                      <label>Teléfono<span class="color-red">*</span></label>
                      <phonenumber-directive model="vm.form.phone" requerid></phonenumber-directive>
                    </div>

                    <div class="col-xs-12">
                      <legend class="legend-title" align="center">Ramos</legend>
                      <div class="row">
                        <div class="col-xs-12 col-sm-6 col-md-2 col-md-offset-1" align="center">
                          <div class="checkbox">
                            <label><input type="checkbox" ng-model="vm.form.ramos.fidelidad">Fidelidad</label>
                          </div>
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-2" align="center">
                          <div class="checkbox">
                            <label><input type="checkbox" ng-model="vm.form.ramos.judiciales">Judiciales</label>
                          </div>
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-2" align="center">
                          <div class="checkbox">
                            <label><input type="checkbox" ng-model="vm.form.ramos.administrativas">Administrativas</label>
                          </div>
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-2" align="center">
                          <div class="checkbox">
                            <label><input type="checkbox" ng-model="vm.form.ramos.credito">Crédito</label>
                          </div>
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-2" align="center">
                          <div class="checkbox">
                            <label><input type="checkbox" ng-model="vm.form.ramos.fideicomiso">Fideicomiso</label>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="address-container" ng-repeat="address in vm.address_list track by $index">
                      <div class="col-xs-12 legend-gray btn-mt">
                        <legend class="legend-title legend-flex" align="center">
                          <button type="button" class="btn btn-danger pull-left hidden-xs" name="button" ng-click="vm.deleteAddress($index)" ng-disabled="vm.address_list.length <= 1">
                            Quitar dirección
                          </button>
                          <button type="button" class="btn btn-danger pull-left visible-xs-inline-block" name="button" ng-click="vm.deleteAddress($index)" ng-disabled="vm.address_list.length <= 1">
                            <i class="glyphicon glyphicon-minus"></i>
                          </button>
                          <span>
                            Dirección #{{$index + 1}}
                          </span>
                          <button class="btn btn-success pull-right hidden-xs" ng-click="vm.addAddress()" type="button">
                            Agregar dirección
                          </button>
                          <button class="btn btn-success pull-right visible-xs-inline-block" ng-click="vm.addAddress()" type="button">
                            <i class="glyphicon glyphicon-plus"></i>
                          </button>
                        </legend>
                      </div>

                      <div class="col-xs-12 address_components">
                        <div class="col-xs-12 col-sm-6 nopadding form-group" ng-class="{ 'has-error': form.state.$invalid && !form.state.$pristine }">
                          <label>Estado<span class="color-red">*</span></label>
                          <select class="form-control" data-ng-options="estado.state for estado in vm.statesArray track by estado.url" name="state" ng-model="address.administrative_area_level_1" required>
                            <option value="" disabled="">Selecciona un estado</option>
                          </select>
                        </div>

                        <div class="col-xs-12 col-sm-6 nopadding form-group" ng-class="{ 'has-error': form.city.$invalid && !form.city.$pristine }">
                          <label>Municipio<span class="color-red">*</span></label>
                          <select class="form-control" data-ng-options="ciudad.city for ciudad in address.administrative_area_level_1.cities track by ciudad.url" name="city" ng-model="address.administrative_area_level_2" required>
                            <option value="" disabled="">Selecciona un municipio</option>
                          </select>
                        </div>

                        <div class="col-xs-12 col-md-8 nopadding form-group">
                          <label>Calle</label>
                          <input type="text" class=" form-control" ng-model="address.route" id="id_address_route" name="address_route" data-geo="route" />
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-2 nopadding form-group">
                          <label>Num. Ext.</label>
                          <input type="text" class=" form-control" ng-model="address.street_number" id="id_address_street_number" name="address_street_number" data-geo="street_number" />
                        </div>

                        <div class="col-xs-12 col-sm-6 col-md-2 nopadding form-group">
                          <label>Num. Int.</label>
                          <input type="text" class=" form-control" ng-model="address.street_number_int" id="id_address_street_number_int" name="address_street_number_int" />
                        </div>

                        <div class="col-xs-12 col-sm-6 nopadding form-group">
                          <label>Colonia</label>
                          <input type="text" class=" form-control" ng-model="address.sublocality" id="id_address_sublocality" name="address_sublocality" data-geo="sublocality" />
                        </div>

                        <div class="col-xs-12 col-sm-6 nopadding form-group">
                          <label>Código Postal</label>
                          <input type="tel" name="zip" ng-model="address.postal_code" minlength="5" maxlength="5" class="form-control" ng-keypress=filterValue($event) />
                        </div>

                        <div class="col-xs-12 nopadding form-group">
                          <label>Referencias</label>
                          <input type="text" class=" form-control" ng-model="address.details" id="id_address_details" name="address_details" />
                        </div>

                        <input type="hidden" class=" form-control" ng-model="address.administrative_area_level_1_short" id="id_address_administrative_area_level_1_short" name="address_state_code" data-geo="administrative_area_level_1_short" />

                        <input type="hidden" class=" form-control" ng-model="address.country" id="id_address_country" name="address_country" data-geo="country" value="México" />

                        <input type="hidden" class=" form-control" ng-model="address.composed" id="id_address_composed" name="address_composed" />

                        <input type="hidden" class=" form-control" ng-model="address.country_code" id="id_address_country_code" name="address_country_code" data-geo="country_short" value="MX" />

                        <input type="hidden" class=" form-control" ng-model="address.locality" id="id_address_locality" name="address_locality" data-geo="locality" />

                        <input type="hidden" class=" form-control" ng-model="address.latitude" id="id_address_latitude" name="address_latitude" data-geo="lat" />

                        <input type="hidden" class=" form-control" ng-model="address.longitude" id="id_address_longitude" name="address_longitude" data-geo="lng" />

                        <input type="hidden" class=" form-control" ng-model="address.formatted" id="id_address_formatted" name="address_formatted" data-geo="formatted_address" />
                      </div>
                    </div>

                    <div class="col-xs-12 form-group btn-mt">
                      <label>Observaciones</label>
                      <textarea class="form-control" type="text" ng-model="vm.form.description"></textarea>
                    </div>

                    <div>
                      <div class="col-xs-12">
                        <legend class="legend-title" align="center">
                          Información de contacto
                        </legend>
                      </div>

                      <div class="col-xs-12">
                        <div class="row" ng-if="vm.form.contact_provider.length == 0">
                          <div class="col-xs-12 legend-gray">
                            <legend class="legend-title legend-flex" align="center">
                              <button type="button" class="btn btn-danger pull-left hidden-xs" name="button" ng-disabled="vm.form.contact_provider == 0">
                                Quitar contacto
                              </button>
                              <button type="button" class="btn btn-danger pull-left visible-xs-inline-block" name="button" ng-disabled="vm.form.contact_provider.length == 0">
                                <i class="glyphicon glyphicon-minus"></i>
                              </button>
                              <span>
                                Contactos
                              </span>
                              <button class="btn btn-success pull-right hidden-xs" ng-click="vm.addContact()" type="button">
                                Agregar contacto
                              </button>
                              <button class="btn btn-success pull-right visible-xs-inline-block" ng-click="vm.addContact()" type="button">
                                <i class="glyphicon glyphicon-plus"></i>
                              </button>
                            </legend>
                          </div>
                        </div>

                        <div class="row address-container" ng-repeat="contact in vm.form.contact_provider track by $index">
                          <div class="col-xs-12 legend-gray">
                            <legend class="legend-title legend-flex" align="center">
                              <button type="button" class="btn btn-danger pull-left hidden-xs" name="button" ng-click="vm.deleteContacts(contact.url, $index)">
                                Quitar contacto
                              </button>
                              <button type="button" class="btn btn-danger pull-left visible-xs-inline-block" name="button" ng-click="vm.deleteContacts(contact.url, $index)">
                                <i class="glyphicon glyphicon-minus"></i>
                              </button>
                              <span>
                                Contacto #{{$index + 1}}
                              </span>
                              <button class="btn btn-success pull-right hidden-xs" ng-click="vm.addContact()" type="button">
                                Agregar contacto
                              </button>
                              <button class="btn btn-success pull-right visible-xs-inline-block" ng-click="vm.addContact()" type="button">
                                <i class="glyphicon glyphicon-plus"></i>
                              </button>
                            </legend>
                          </div>

                          <div class="col-xs-12 address_components">
                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Nombre</label>
                              <input class="form-control" type="text" ng-model="contact.name">
                            </div>

                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Correo electrónico</label>
                              <input class="form-control" type="email" ng-model="contact.email">
                            </div>

                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Teléfono</label>
                              <phonenumber-directive placeholder="myPrompt" model="contact.phone_number"></phonenumber-directive>
                            </div>


                            <!-- <div class="col-xs-12 col-sm-4 form-group">
                              <label>Ramo</label>
                              <input class="form-control" type="text" lowercase ng-model="contact.ramo">
                            </div>

                            <div class="col-xs-12 col-sm-4 form-group">
                              <label>Subramo</label>
                              <input class="form-control" type="text" lowercase ng-model="contact.subramo">
                            </div> -->
                          </div>
                        </div>

                        <div class="btn-mt">
                          <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 form-group pull-right">
                            <button ng-if="vm.user.permiso.crear" class="col-xs-12 btn btn-primary" ng-disabled="form.$invalid" type="submit">Crear Afianzadora</button>
                          </div>
                          <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 form-group pull-right">
                            <button id="cancelButtonMoral" class="col-xs-12 btn btn-danger" ng-click="cancel()" type="button">Cancelar</button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </uib-tab>
          </uib-tabset>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="ibox float-e-margins">
      <div class="ibox-title">
        <h5>Aseguradoras</h5>
        <div ibox-tools></div>
      </div>

      <div class="ibox-content">
        <div class="row">
          <div class="col-xs-12 col-md-8 col-lg-12 form-group">
            <label>Aseguradora</label>
            <div class="col-xs-12 input-group">
              <input type="text" class="form-control" placeholder="Buscar" ng-enter="vm.search(cadena)" ng-model="cadena">
              <div class="input-group-btn">
                <button class="btn btn-success" ng-click="vm.getAll()">Mostrar todo</button>
              </div>
            </div>
          </div>
        </div>

        <div id="exportable" ng-if="vm.providers.length">
          <table class="table footable table-hover table-bordered" data-filter="#filter" data-page-size="25" id="dvData" ng-if="!vm.show_binnacle">
            <thead>
              <th class="footable-visible footable-sortable footable-first-column" data-breakpoints="xs">
                Alias
                <span class="footable-sort-indicator"></span>
              </th>
              <th class="footable-visible footable-sortable" data-hide="phone" >
                Compañía
                <span class="footable-sort-indicator"></span>
              </th>
              <th data-hide="phone" class="footable-sortable" style="display: none;">
                RFC
                <span class="footable-sort-indicator"></span>
              </th>
              <th data-hide="phone" class="footable-sortable" style="display: none;">
                Opción
              </th>
              <th data-hide="phone" class="footable-sortable">Acciones</th>
            </thead>
            <tbody>
              <tr ng-repeat="provider in vm.providers | orderBy: 'alias' track by $index" foo-repeat-done>
                <td>{{ provider.alias }}</td>
                <td>{{ provider.compania }}</td>
                <td>{{ provider.rfc }}</td>
                <td>
                  <button ng-click="vm.editProvider(provider)"  ui-sref="aseguradoras.edit({aseguradoraId: provider.id})" type="button" class="btn btn-w-m btn-default" name="button" ng-if="vm.user.permiso.editar">Editar</button>
                  <button ng-click="vm.infoProvider(provider)"  type="button" class="btn btn-w-m btn-success" name="button" >Ver</button>
                </td>
                <td ng-click="$event.stopPropagation();">
                  <a class="btn btn-white btn-sm" ng-click="$event.stopPropagation(); vm.showBinnacle(provider)">
                    <i class="fa fa-comment" aria-hidden="true"></i>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>

          <div ng-if="show_pagination && !vm.show_binnacle" class="text-center">
            <pagination config="vm.config_pagination" model="vm.providers"></pagination>
          </div>

          <div ng-if="vm.providers.length && vm.buttonReport == false && !vm.show_binnacle">
            <button ng-model="vm.buttonReport" class="col-xs-12 col-sm-6 col-md-4 col-lg-3 btn btn-primary ladda-button" ng-click="exportData()">
              Generar reporte
            </button>
          </div>

          <div ng-if="vm.buttonReport == true && !vm.show_binnacle">
            <button ng-model="vm.buttonReport" class="col-xs-12 col-sm-6 col-md-4 col-lg-3 btn btn-primary ladda-button" ng-click="exportDataSeeker(1)">
              Generar reporte
            </button>
          </div>

          <div class="animate" ng-if="vm.show_binnacle">
            <div class="">
              <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 form-group">
                  <button class="col-xs-12 btn btn-info" ng-click="vm.returnToProvider()"><span class="fa fa-reply"></span>  Regresar</button>
              </div>
              
              <div class="col-xs-12">
                <comments datasource="vm.comments_data" typemodel="11" config="vm.comments_config" idmodel="vm.provider_id" exportable="true"></comments>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
