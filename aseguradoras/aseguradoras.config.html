<toaster-container></toaster-container>
<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-sm-9">
    <h2>Aseguradoras</h2>
    <ol class="breadcrumb">
      <li>
        <a ui-sref="inicio.inicio">Inicio</a>
      </li>
      <li>
        <a ui-sref="aseguradoras.aseguradoras">Aseguradoras</a>
      </li>
      <li class="active">
        <strong>Configuraciones</strong>
      </li>
    </ol>
  </div>
</div>

<div class="wrapper wrapper-content animated fadeIn ng-scope">
  <div class="row">
    <div class="col-sm-6">
      <div class="ibox" ng-hide="true"> <!-- HACK Por actualizacion -->
        <div class="ibox-title">
          <h5>Ramos
          </h5>
        </div>
        <div class="ibox-content">
          <div class="row">
            <div class="col-sm-12">
              <!-- <div class="panel panel-success"> -->
                <!-- <div class="panel-heading">
                  Editar
                </div> -->
                <div class="panel-body">
                  <!-- <div>
                    <button class="btn btn-w-m btn-danger pull-right" name="button" ng-click="vm.openModal()" type="button">Eliminar</button>
                  </div> -->
                  <div class="alert alert-danger" ng-show="vm.error">{{vm.error}}</div>
                  <form class="form-horizontal" method="post" name="form" ng-submit="vm.submit(form.$valid)" novalidate role="form">
                    <div class="form-group" ng-class="{ 'has-error': form.name.$invalid && !form.name.$pristine  }">
                      <!--//form.name.$error.required -->
                      <label class="col-sm-2 control-label">Nombre del ramo*</label>
                      <div class="col-sm-10">
                        <input class="form-control" name="name" ng-model="vm.form.ramo_name" required type="text">
                      </div>
                      <!-- <span ng-show="form.name.$invalid && form.name.$pristine" class="help-block">Username is required</span> -->
                    </div>
                    <div class="form-group" ng-class="{ 'has-error': form.name.$invalid && !form.name.$pristine  }">
                      <!--//form.name.$error.required -->
                      <label class="col-sm-2 control-label">Código del ramo*</label>
                      <div class="col-sm-10">
                        <input class="form-control" name="name" ng-model="vm.form.ramo_code" required type="text">
                      </div>
                      <!-- <span ng-show="form.name.$invalid && form.name.$pristine" class="help-block">Username is required</span> -->
                    </div>
                    <div class="hr-line-dashed"></div>
                    <div class="row">
                      <div class="form-group col-sm-12">
                            <button class="btn btn-white pull-right" type="button" ng-click="vm.cancel()">Borrar datos</button>
                            <button class="btn btn-success pull-right margin-right-10" ng-disabled="form.$invalid" type="submit" ng-click="vm.save()">Guardar</button>
                      </div>
                    </div>
                  </form>
                </div>
              <!-- </div> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <div class="ibox float-e-margins collapsed">
        <div class="ibox-title" ng-if="vm.user.permiso.crear">
          <h5>Agregar Ramos</h5>
          <div ibox-tools></div>
        </div>
        <div class="ibox-content">
          <form role="form">
            <div class="row">
              <div class="col-sm-12">
                <h3>Información del Ramo</h3>
              </div>
            </div>
            <div class="row">
              <div class="form-group col-sm-6">
                <label for="ramo_code">Código del ramo</label>
                <input
                  class="form-control"
                  type="number"
                  ng-model="vm.ramo_form.ramo_code">
              </div>
              <div class="form-group col-sm-6">
                <label for="ramo_name">Nombre del ramo</label>
                <input
                  class="form-control"
                  type="text"
                  ng-model="vm.ramo_form.ramo_name">
              </div>
            </div>
            <div
              class="check-element animate-show"
              ng-show="vm.ramo_form.validRamo()">
              <div class="row">
                <div class="col-sm-12">
                  <h3>Subramos</h3>
                </div>
              </div>

              <div class="row">
                <div class="form-group col-sm-6">
                  <label for="subramo_code">Codigo del subramo</label>
                  <input
                    id="subramo_code"
                    type="number"
                    class="form-control"
                    ng-model="vm.ramo_form.subramo_code">
                </div>
                <div class="form-group col-sm-6">
                  <label for="subramo_name">Nombre del subramo</label>
                  <input
                    id="subramo_name"
                    type="text"
                    class="form-control"
                    ng-model="vm.ramo_form.subramo_name">
                </div>
              </div>
              <div class="row">
                <div class="form-group col-sm-12">
                  <button
                  ng-if="vm.user.permiso.crear"
                    type="button"
                    class="btn btn-info btn-block"
                    ng-click="vm.ramo_form.addSubramo(vm.ramo_form.subramo_code,vm.ramo_form.subramo_name)">Agregar</button>
                </div>
              </div>
              <div
                class="check-element animate-show"
                ng-show="vm.ramo_form.hasSubramos()">
                <div class="row">
                  <div class="form-group col-sm-12">
                    <div class="table-responsive">
                      <table class="table">
                        <thead>
                          <tr>
                            <th>Subramo ID</th>
                            <th>Subramo Nombre</th>
                            <th style="width=30%;">Acción</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="subramo in vm.ramo_form.subramos track by $index">
                            <td>{{subramo.subramo_code}}</td>
                            <td>{{subramo.subramo_name}}</td>
                            <td>
                              <button
                                type="button"
                                class="btn btn-danger"
                                ng-click="vm.ramo_form.deleteSubramo(subramo)" ng-if="vm.user.permiso.eliminar">Eliminar</button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div
                class="form-group">
                <button
                  type="button"
                  ng-click="vm.ramo_form.submit()"
                  ng-disabled="!vm.ramo_form.validForm()"
                  class="btn btn-success" ng-if="vm.user.permiso.editar">>Guardar</button>
                <button
                  type="button"
                  ng-click="vm.ramo_form.cancel()"
                  class="btn ">Cancelar</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <div class="ibox float-e-margins">
        <div class="ibox-title">
          <h5>Ramos y subramos</h5>
          <div ibox-tools></div>
        </div>
        <div class="ibox-content">
          <table class="table table-striped table-bordered table-hover dataTables-example" datatable="ng">
            <thead>
              <tr>
                <th>Ramo</th>
                <th>Código del ramo</th>
                <!--<th></th>-->
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="ramo in vm.ramos track by $index" ng-click="vm.editRamoModal(ramo)">
                <td><!--<a ui-sref="aseguradoras.subramos({aseguradoraId: vm.provider.id, ramosId: ramo.id})">-->{{ramo.ramo_name}}<!--/a--></td>
                <td>{{ramo.ramo_code}}</td>
                <!-- <td>{{ provider.rfc }}</td>
                <td>{{ provider.address }}</td> -->
                <!--<td>-->
                  <!-- <button ng-click="vm.editProvider(provider)"  ui-sref="aseguradoras.edit({aseguradoraId: provider.id})"
                      type="button" class="btn btn-w-m btn-info" name="button">Editar</button>
                  <button ng-click="vm.editProvider(provider)"  ui-sref="aseguradoras.ramos({aseguradoraId: provider.id})"
                      type="button" class="btn btn-w-m btn-info" name="button">Configuraciones</button> -->
                <!--</td>-->
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
